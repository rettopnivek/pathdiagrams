---
title: "my-vignette"
output: rmarkdown::html_vignette
vignette: >
%\VignetteIndexEntry{my-vignette}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
  ---
  
  ```{r, include = FALSE}
  knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
  )
  ```
  
  ```{r setup}
  library(pathdiagrams)
  ```
  
  ## Table of contents
  
  1. Introduction
  2. ???
  3. ???
  4. ???
  5. ???
  6. ???
  
  ## 1) Introduction
  
  The *pathdiagrams* package provides an extension to base R's plotting tools for creating various types of path diagrams. The package can be used to help create diagrams displaying various structural equation model (SEM) analyses, such as factor or path analyses. The package can also be used to create CONSORT-type diagrams (subject enrollment and retention in a study).
  
  ## 2) ???
  
  Proceeds in two steps
  
  Create a blank slate using 'create_base_figure'. 
  
  Add nodes and lines/arrows via functions like 'add_nodes' etc.
  
  ```{r}
# Creates a base figure with lower and upper limits from 
# 0 to 1. By default, figure is 6 x 6 inches (? x ? cm), 
# and has guidelines to aid with development and 
# positioning for the diagram.
create_base_figure( new = FALSE )

# Add a rectangle with the text 'Node-01' centered at 
# the (x,y) coordinates (0.3,0.8). Input is formatted 
# as: 'Text|x=coordinate|y=coordinate' - each element 
# is separated by the '|' symbol.
add_nodes( 'Node-01|x=.3|y=.8' )

# Add multiple nodes with text at different y-axis 
# positions.
add_nodes( c( 'Node-02|x=.3|y=.6', 'Node-03|x=.3|y=.4' ) )

```

## 3) ???

Forthcoming.

```{r}

create_base_figure( new = FALSE )

inputs <- c(
  N01 = 'Node-01|x=.3|y=.833',
  N02 = 'Node-02|x=.3|y=.567'
)
nodes <- add_nodes( inputs, output = TRUE )

size( nodes$N01 )

sep( nodes, c( 'N01', 'N02' ), 
     dimension = 'y-axis' )

sep( nodes, c( 'N01', 'N02' ), 
     dimension = 'y-axis', desired = .1 )
```

Forthcoming.

```{r}

create_base_figure( new = FALSE )

inputs <- c(
  N01 = 'Node-01|x=.3|y=.833',
  N02 = 'Node-02|x=.3|y=.666'
)
nodes <- add_nodes( inputs, output = TRUE )

```

## 4) ???

Forthcoming.

```{r}
create_base_figure( guidelines = FALSE, new = FALSE )

inputs <- c(
  # Change shape to ellipse
  N01 = 'Node-01|x=.5|y=.8|ns=circle',
  # Change fill color to grey
  N02 = 'Node-02|x=.5|y=.65|nc=grey80',
  # Change border color to red
  N03 = 'Node-03|x=.5|y=.5|nb=red',
  # Change padding around text
  N03a = 'Node-03a|x=.25|y=.5|np=1.5',
  # Change padding around text
  N03b = 'Node-03b|x=.75|y=.5|nx=.2|ny=.15',
  # Change border width
  N04 = 'Node-04|x=.5|y=.35|nw=4',
  # Change border type
  N05 = 'Node-05|x=.5|y=.2|nt=3'
)
nodes <- add_nodes( inputs, output = TRUE )

text( c( .5, .5, .5, .25, .75, .5, .5 ), 
      c( .74, .59, 0.44, .4, .39, .29, .14 ),
      c( 'ns=circle', 'nc=grey80', 'nb=red', 
         'np=1.5', 'nx=.2|ny=.15', 'nw=4', 
         'nt=3' )
)
```

## 5) ???

Forthcoming.

```{r}

create_base_figure( guidelines = FALSE, new = FALSE )

inputs <- c(
  # Change text size
  N02 = 'Text-01|x=.5|y=.8|ts=2',
  # Change text color
  N02 = 'Text-02|x=.5|y=.65|tc=red',
  # Multiple lines of text
  N03 = 'Text-03\nText-04|x=.5|y=.5',
  # Change spacing between lines
  N04 = 'Text-05\nText-06|x=.5|y=.25|th=.08'
)
nodes <- add_nodes( inputs, output = TRUE )

text( .5, c( .73, .6, .14 ),
      c( 'ts=2', 'tc=red', 'th=.08' )
)
```

## 6) ???

Forthcoming.

```{r}

create_base_figure( guidelines = FALSE, new = FALSE )

inputs <- c(
  N01 = 'Node-01|x=.25|y=.25',
  N02 = 'Node-02|x=.25|y=.75',
  N03 = 'Node-03|x=.75|y=.75',
  N04 = 'Node-04|x=.75|y=.25'
)

paths <- c(
  # Arrow between Node-01 and Node-04
  'N01|right|N04|left',
  # 
  'N01|top|N02|bottom|lp=0|ll=0',
  # 
  'N02|right|N03|left|cd=<->',
  # 
  'N03|bottom|N04|top|lw=4|lc=red',
  # 
  'x,y|.25,.5|x,y|.75,.5'
)

nodes <- add_nodes( inputs, paths, output = TRUE )
```

